{% extends "base.html" %}
{% block title %}{{ titulo }} - Veris{% endblock %}
{% block body_class %}veris-crear-body{% endblock %}
{% block content %}
  <div class="container my-4 veris-crear-container">
    <h2 class="veris-crear-title">{{ titulo }}</h2>

    <form method="post" class="form-horizontal veris-crear-form">
      <hr class="veris-crear-divider" />

      {% for f in fields %}
        {% set input_type = field_meta[f][0] %}
        {% set is_textarea = field_meta[f][1] %}
        <div class="form-group row mb-3 veris-crear-group">
          <label class="control-label col-md-2 veris-crear-label" for="{{ f }}">{{ f }}</label>
          <div class="col-md-10 veris-crear-input-col">
            {% if is_textarea %}
              <textarea class="form-control veris-crear-input" id="{{ f }}" name="{{ f }}" rows="4">{{ values.get(f, "") }}</textarea>
            {% else %}
              <input class="form-control veris-crear-input" id="{{ f }}" type="{{ input_type }}" name="{{ f }}" value="{{ values.get(f, "") }}" />
            {% endif %}

            {% if f == 'Foto' and values.get(f) %}
              <div class="mt-2">
                <img src="{{ url_for('static', filename='img/usuarios/' ~ values.get(f)) }}" alt="foto" width="80" onerror="this.style.display='none'" />
              </div>
            {% endif %}
          </div>
        </div>
      {% endfor %}

      <div class="form-group row mb-3 veris-crear-button-group">
        <div class="col-md-offset-2 col-md-10 d-flex gap-2">
          <button type="submit" class="btn btn-primary veris-crear-btn">Guardar</button>
          <a class="btn btn-outline-secondary veris-crear-back" href="{{ base_path }}/">Volver a la lista</a>
        </div>
      </div>
    </form>
  </div>
{% endblock %}
